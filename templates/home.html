{% extends '_base.html' %}
{% load static %}

{% block title %}Home{% endblock title %}

{% block content %}
    <h1>Homepage</h1>
    {% if user.is_authenticated %}
        <p>Hi {{ user.username }}!</p>
        <p id="timer" class="badge badge-pill badge-warning">Your session expires in: {{ request.session.get_expiry_age }} sec.</p>
        <script>
            let Timer = document.getElementById("timer");
            let sessionTime = {{ request.session.get_expiry_age }}
            setInterval(countDown, 1000);

            function countDown(){
                Timer.innerHTML = `Your session expires in: ${sessionTime} sec.`
                sessionTime--;
            }
        </script>
        <p><a href="{% url 'account_logout' %}">Log Out</a></p>
    {% else %}
        <p>You are not logged in</p>
        <p><a href="{% url 'account_login' %}">Log In</a> |
        <a href="{% url 'account_signup' %}">Sign Up</a></p>
    {% endif %}
{% endblock content %}